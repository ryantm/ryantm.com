<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- (c) 2008 Ryan Mulligan All rights reserved. -->
<html lang='en' xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
    <meta content="Ryan T Mulligan's personal website." name='description' />
    <meta content='Ryan Mulligan, Ryan, Mulligan, RyanTM' name='keywords' />
    <title>Delegating Your OpenID Authentication doesn&#8217;t work with Drupal 6 - Efficient Methods - Ryan Mulligan</title>
    <!-- / Open Id -->
    <link href='http://www.myopenid.com/server' rel='openid.server' />
    <link href='http://ryantm.myopenid.com' rel='openid.delegate' />
    <meta content='http://www.myopenid.com/xrds?username=ryantm.myopenid.com' http-equiv='X-XRDS-Location' />
    <link href='http://feeds.feedburner.com/RyanTM' rel='alternate' title='Ryan Mulligan' type='application/rss+xml' />
    <link href='../stylesheets/reset-fonts-grids.css' media='screen' rel='stylesheet' type='text/css' />
    <link href='../stylesheets/application.css' media='screen' rel='stylesheet' type='text/css' />
  </head>
  <body>
    <table id='maintable'>
      <tr>
        <td colspan='3' id='banner'>
          <div class='inner'>
            <a class='logo' href='/' title="Ryan Mulligan's homepage">
              RyanTM.com
            </a>
            <h2>Efficient Methods</h2>
            <!-- /=image_tag "logo.png", :alt=>"Ryan Mulligan" -->
          </div>
        </td>
      </tr>
      <tr>
        <td id='main'>
          <div class='inner'>
            <h1>Delegating Your OpenID Authentication doesn&#8217;t work with Drupal 6</h1>
            published at Thu, 29 May 2008 18:47:47 +0000
            <p>
              When I read that <a href="http://drupal.org/drupal-6.0" title="Drupal 6">Drupal 6</a> supported OpenID, I was happy about it. I use OpenID for logins whenever I can, but I have it set up in a sort of novel way. My novel way is to have my open id be www.ryantm.com and then have that website <strong>delegate the authentication</strong> to another company. In my case, I picked this <a href="http://www.myopenid.com">good OpenID providor</a>. I figured out how to do this by watching <a href="http://video.google.com/videoplay?docid=2288395847791059857">Simon Willison's google video talk</a>. All you do is add these few lines to the head element of your OpenID url, but replace 'ryantm' with your username:
            </p>
            <pre id="line1"><span class="comment">&lt;!-- / Open Id --&gt;</span>
            &lt;<span class="start-tag">link</span><span class="attribute-name"> href</span>=<span class="attribute-value">'http://www.myopenid.com/server' </span><span class="attribute-name">rel</span>=<span class="attribute-value">'openid.server' </span><span class="error"><span class="attribute-name">/</span></span>&gt;
            &lt;<span class="start-tag">link</span><span class="attribute-name"> href</span>=<span class="attribute-value">'http://ryantm.myopenid.com' </span><span class="attribute-name">rel</span>=<span class="attribute-value">'openid.delegate' </span><span class="error"><span class="attribute-name">/</span></span>&gt;
            &lt;<span class="start-tag">meta</span><span class="attribute-name"> content</span>=<span class="attribute-value">'http://www.myopenid.com/xrds?username=ryantm.myopenid.com' </span><span class="attribute-name">http-equiv</span>=<span class="attribute-value">'X-XRDS-Location' </span><span class="error"><span class="attribute-name">/</span></span>&gt;</pre>
            The great part about this is that it works with <strong>any OpenID providor</strong>. So if at some point myopenid.com crosses my path, I can just delegate my OpenID authentication to another providor, and all of my OpenID logins will still work. In a sense, I've given myself complete flexibility with <strong>no chance of lock-in</strong>.
            <img src="http://www.ryantm.com/blog/wp-content/noopenid.png" alt="No Open ID" width="771" align="middle" height="256" />
            Unfortunately Drupal 6's OpenID support isn't up to snuff to handle my OpenID Delegation. It seems that while they seem claim they've implemented the entire OpenID spec by the wording on their marketing pages it doesn't work for me. I tried www.ryantm.com and http://www.ryantm.com and it keeps rudely telling me that's not a valid OpenID. I was under the impression that <strong>any url was a valid OpenID</strong>.
            Anyway, I've created a <a href="http://drupal.org/node/264307">bug report</a> for this so you can follow what's going on. Please add comments to the bug if you are having this problem as well.
          </div>
        </td>
        <td id='sidebar'>
          <div class='inner'>
            <ul class='navigation'>
              <li><a href='../'>Home</a></li>
              <li><a href='../blog'>Blog</a></li>
              <ul>
                <li><a href='../blog/archives'>Archives</a></li>
              </ul>
              <li><a href='../about.html'>About</a></li>
              <ul>
                <li><a href='../resume.html'>Resume</a></li>
                <li><a href='../contact.html'>Contact</a></li>
              </ul>
            </ul>
          </div>
        </td>
      </tr>
      <tr>
        <td colspan='3' id='footer'>
          All writing (except quotations) on www.ryantm.com is <a href='http://creativecommons.org/licenses/publicdomain/'>dedicated to the public domain</a>.
        </td>
      </tr>
    </table>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    var pageTracker = _gat._getTracker("UA-4515791-1");
    pageTracker._initData();
    pageTracker._trackPageview();
    </script>
  </body>
</html>